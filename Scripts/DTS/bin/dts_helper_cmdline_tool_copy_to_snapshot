#!/usr/bin/perl

use strict;

use warnings;

use JSON::XS;

use Data::Dump qw(pp);

use Path::Class;
    
my $json_coder = JSON::XS->new->ascii->pretty->allow_nonref;

##
## qml: CONFIG_NAME=ConfigZebrafish1 ENTRY_TYPE=boundarymodel IMAGE_SOURCE=/media/muenalan/share/GOR-robustness_embryogenesis/data/Acquifer/0089-210420-ACQUIFER-mezzo/PNGs/-A003--PO01/embryos/-A003--PO01--E003/-A003--PO01--LO342--CO6--E003.png WELL_ID=A003 EMBRYO_ID=E003 METADATA_LOCAL_MAXIMA_N=234 CLASS=autostage LO_ID=342 BOUND_LOWER=191 BOUND_UPPER=348 tool_copy_to_snapshot
## qml: CONFIG_NAME=ConfigZebrafish1 ENTRY_TYPE=atlasmodel IMAGE_SOURCE=/media/muenalan/share/GOR-robustness_embryogenesis/data/Acquifer/0089-210420-ACQUIFER-mezzo/PNGs/-A003--PO01/embryos/-A003--PO01--E003/-A003--PO01--LO001--CO6--E003.png WELL_ID=A003 EMBRYO_ID=E003 ATLAS_INDEX=0 LO_ID=1 TYPE=cap CLASS=autostage BOUNDARY_INDEX=0 tool_copy_to_snapshot
## 

my $targetdir = '/media/sf_Mueller/Documents/GOR-robustness_embryogenesis/Manuscripts/Siamese-networks/data/';

use Env;

if( $ENTRY_TYPE eq 'atlasmodel' )
{
	my $filename_target = dir( $targetdir )->subdir( 'DTS' )->subdir( $CONFIG_NAME )->subdir( $WELL_ID."_".$EMBRYO_ID )->file( $LO_ID.".png" );

	$filename_target->dir->mkpath unless -d $filename_target->dir;

	my $cmdstring=sprintf( "cp '%s' '%s'", $IMAGE_SOURCE, $filename_target );

	print( $cmdstring, "\n" );
	
	warn "CMD result: ", qx{$cmdstring};
}

if( $ENTRY_TYPE eq 'boundarymodel' )
{
#	printf( "copy boundarymodel IMAGE_SOURCE='%s'\n", $IMAGE_SOURCE );
}
